<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AplyO | Applications</title>
  <link rel="stylesheet" href="./css/style.css" />
</head>

<body>
  <nav style="display: flex; flex-direction: row;" class="nav">
    <div class="nav_brand">
      <div class="logo">A</div>
      <div>
        <h1 class="nav_title">AplyO</h1>
        <p class="nav_subtitle">Master your job search</p>
      </div>
    </div>
    <button id="openSidebarBtn" class="nav_toggle" aria-label="Toggle menu">
      ☰
    </button>
    <div id="navMenu" class="nav_links">
      <a id="d" href="/index.html" class="nav_link ">Dashboard</a>
      <a id="a" href="applications.html" class="nav_link active ">Applications</a>
      <a id="k" href="kanban.html" class="nav_link">Kanban</a>
      <a id="s" href="settings.html" class="nav_link">Settings</a>
    </div>
  </nav>

  <div class="mobileSidebar hidden" id="mobileSidebar">
    <div class="mobileSidebar_head">
      <div class="nav_brand">
        <div class="logo">A</div>
        <div>
          <h1 class="nav_title">AplyO</h1>
          <p class="nav_subtitle">Track like a pro</p>
        </div>
      </div>

      <button class="nav_menuBtn nav_toggle" id="closeSidebarBtn">✕</button>
    </div>

    <div class="mobileSidebar_links">
      <a href="./index.html" class="nav_link ">Dashboard</a>
      <a href="./applications.html" class="nav_link active">Applications</a>
      <a href="./kanban.html" class="nav_link">Kanban</a>
      <a href="./settings.html" class="nav_link">Settings</a>
    </div>
  </div>

  <div class="sidebarOverlay hidden" id="sidebarOverlay"></div>

  <main class="container">
    <section class="card">
      <div class="card_header">
        <div>
          <h2 style="font-size: 18px;">Applications</h2>
          <p class="muted">Add, update, filter and manage your job applications</p>
        </div>
        <div style="display: flex; gap: 10px; flex-wrap:wrap;scale: 0.9;">
          <button id="openQuickAddBtn" class="btn btn--ghost"> Quick Add</button>

          <button id="openModalBtn" class="btn btn--primary">+ Add Application</button>
        </div>
      </div>

      <div id="quickAddModal" class="modal hidden">
        <div class="modal_box">
          <div class="modal_header">
            <h3>Quick Add</h3>
            <button id="closeQuickAddBtn" class="btn btn--ghost nav_toggle">✕</button>
          </div>

          <p class="muted" style="margin-bottom:10px;">
            Type like a message. Example: <b>Applied TCS Frontend Mumbai 2026-01-12</b>
          </p>

          <textarea id="quickAddInput" class="input textarea" rows="4"
            placeholder="e.g. Interview Infosys Web Intern Remote"></textarea>

          <div class="form_actions">
            <button id="cancelQuickAddBtn" class="btn btn--ghost">Cancel</button>
            <button id="submitQuickAddBtn" class="btn btn--primary">Add</button>
          </div>
        </div>
      </div>


      <div class="controls">
        <input id="searchInput" type="text" placeholder="Search by company or role..." class="input" />

        <div class="customSelect">


          <button type="button" id="statusBtn" class="input customSelect_btn">
            <span id="statusValue">All </span>
            <span class="customSelect_arrow"> ▼</span>

          </button>

          <div id="statusMenu" class="customSelect_menu hidden">
            <button type="button" class="customSelect_item" data-status="All">All</button>
            <button type="button" class="customSelect_item" data-status="Applied">Applied</button>
            <button type="button" class="customSelect_item" data-status="Interview">Interview</button>
            <button type="button" class="customSelect_item" data-status="Offer">Offer</button>
            <button type="button" class="customSelect_item" data-status="Rejected">Rejected</button>
          </div>


          <input type="hidden" id="statusBy" value="All" />

        </div>


        <div class="customSelect">
          <button type="button" id="sortBtn" class="customSelect_btn">
            <span id="sortValue">Sort: Newest</span>
            <span class="customSelect_arrow">▼</span>
          </button>

          <div id="sortMenu" class="customSelect_menu hidden">
            <button type="button" class="customSelect_item" data-sort="newest">Sort: Newest</button>
            <button type="button" class="customSelect_item" data-sort="oldest">Sort: Oldest</button>
            <button type="button" class="customSelect_item" data-sort="company">Sort: Company A-Z</button>
          </div>


          <input type="hidden" id="sortBy" value="newest" />
        </div>

      </div>
    </section>

    <section class="card mt-16">
      <div class="tableWrap desktopOnly">
        <table class="table">
          <thead>
            <tr>
              <th>Company</th>
              <th>Role</th>
              <th>Status</th>
              <th>Location</th>
              <th>Applied Date</th>
              <th class="right">Actions</th>
            </tr>
          </thead>
          <tbody id="jobsTbody"></tbody>
        </table>
      </div>
      <div id="jobsCards" class="jobsCards mobileOnly"></div>

      <p id="emptyText" style="margin-top: 10px; display: none;" class="muted">
        No applications found.
      </p>
    </section>
  </main>

  <!-- Modal -->
  <div id="modal" class="modal hidden">
    <div class="modal_box card">
      <div class="modal_header">
        <h3 id="modalTitle">Add Application</h3>
        <button id="closeModalBtn" class="btn btn--ghost nav_toggle">✕</button>
      </div>

      <form id="jobForm">
        <input type="hidden" id="jobId" />

        <div class="form_grid">
          <div>
            <label class="label">Company *</label>
            <input id="company" class="input" type="text" placeholder="e.g. Infosys" required />
          </div>

          <div>
            <label class="label">Role *</label>
            <input id="role" class="input" type="text" placeholder="e.g. Web Developer Intern" required />
          </div>

          <div class="customSelect">
            <label class="label">Status *</label>

            <button type="button" id="modalStatusBtn" class="input customSelect_btn">
              <span id="modalStatusValue">Applied</span>
              <span class="customSelect_arrow">▼</span>

            </button>

            <div id="modalStatusMenu" class="customSelect_menu hidden">
              <button type="button" class="customSelect_item" data-status="Applied">Applied</button>
              <button type="button" class="customSelect_item" data-status="Interview">Interview</button>
              <button type="button" class="customSelect_item" data-status="Offer">Offer</button>
              <button type="button" class="customSelect_item" data-status="Rejected">Rejected</button>
            </div>


            <input type="hidden" id="status" value="Applied" required />
          </div>


          <div>
            <label class="label">Location</label>
            <input id="location" class="input" type="text" placeholder="Remote / Mumbai / Pune" />
          </div>

          <div>
            <label class="label">Salary</label>
            <input id="salary" class="input" type="text" placeholder="4-6 LPA / Stipend" />
          </div>

          <div>
            <label class="label">Applied Date</label>
            <input id="appliedDate" class="input" type="date" />
          </div>
        </div>

        <div style="margin-top: 12px;">
          <label class="label">Notes</label>
          <textarea id="notes" class="input textarea" rows="3" placeholder="Anything important..."></textarea>
        </div>

        <div class="form_actions">
          <button type="button" id="cancelBtn" class="btn btn--ghost">Cancel</button>
          <button type="submit" class="btn btn--primary">Save</button>
        </div>
      </form>
    </div>
  </div>

  <div id="deleteModal" class="modal hidden">
    <div class="modal_box card" style="max-width: 460px;">
      <div class="modal_header">
        <h3>Delete Application</h3>
        <button id="closeDeleteModalBtn" class="btn btn--ghost nav_toggle">✕</button>
      </div>

      <p class="muted" id="deleteText" style="margin-bottom: 14px;">
        Are you sure you want to delete this application?
      </p>

      <div class="form_actions">
        <button id="cancelDeleteBtn" class="btn btn--ghost">Cancel</button>
        <button id="confirmDeleteBtn" class="btn btn--danger">Delete</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast hidden"></div>

  <script src="./js/storage.js"></script>
  <script src="./js/app.js"></script>
  <script src="./js/applications.js"></script>
  <script src="./js/mobileSidebar.js"></script>
</body>

</html>